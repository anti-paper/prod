[Top](../../../index.md)\>
[プログラミング言語](../../pgl.md)\>
[アセンブリ（MASM32）](../language_0001.md)

# マクロ

## 書式（定義）

    マクロ名 macro パラメータ1:タグ1,パラメータ2:タグ2,パラメータ3:タグ3,・・・
        local ローカル変数名
        ; 処理
        exitm
    マクロ名 endm

パラメータ、タグ、ローカル変数定義、「exitm」は、不要であれば省略可  
また、タグはパラメータに紐づくものであるため、単独では存在し得ない

### マクロのタグ

|タグの種類|意味|
----|----
|:req|呼び出す際に必ず指定しなければならないパラメータであることを示す|
|:=default|パラメータを指定しない場合にデフォルト値として使われる値がdefaultであることを示す|
|:vararg|指定できるパラメータの数が可変であることを示す。<br>当該タグを指定するパラメータはリストの最後でなければならない|

## 書式（呼び出し）

    マクロ名 パラメータ1,パラメータ2,パラメータ3,・・・

パラメータ指定なしの場合、マクロ名のみを記述

## 代表的なマクロ

|マクロ名|処理内容|書式|
----|----|----
|exit|プロセスの終了|```exit```|
|print|パラメータをコンソールに出力|```print パラメータ1,パラメータ2,パラメータ3,・・・```|
|str$|数値を指定した場合はその数値を（文字列に変換して）、文字列を指定した場合はその文字列に対応する文字コードを返す|```str$(数値又は数値の格納されたレジスタ・メモリ)```|
|chr$|指定した文字コードに対応する文字列を返す|```chr$（文字コード1,文字コード2,文字コード3,・・・）```|
|input|指定した文字列をコンソールに表示して、ユーザからの入力を受け付ける（入力内容は全て文字列として認識される）|```input(表示文字列)```|
|sval|指定した文字列を数値に変換|```sval(文字列形式の数字)```|

## マクロの定義によく使用されるディレクティブ

### ifndef

指定したパラメータが定義されていない場合は直後の処理を、そうでなければ「else」以降の処理を実行

#### 書式

    ifndef パラメータ
        処理1
    else
        処理2
    endif

### ifnb

指定したパラメータがブランクでない場合に直後の処理を実行

#### 書式

    ifnb パラメータ
        処理
    endif