[Top](../../../../index.md)\>
[プログラミング言語](../../../pgl.md)\>
[アセンブリ（MASM32）](../../language_0001.md)\>
[基本的な命令](../MASM32_0009.md)

# 値の移動

+ [移動（コピー）命令](#移動コピー命令)
+ [ストリング命令](#ストリング命令)
+ [交換命令](#交換命令)
<!-- + [プッシュとポップ](#プッシュとポップ) -->
<!-- + [ロードとストア](#ロードとストア) -->

## 移動（コピー）命令

ソースオペランドの値をディスティネーションオペランドに移動  
元のソースオペランドの値は変化しない  

### 書式

```mov ディスティネーションオペランド,ソースオペランド```

### オペランドに指定できる値

|オペランド|指定できる値|
----|----
|ディスティネーションオペランド|レジスタ、メモリ、セグメントレジスタ|
|ソースオペランド|レジスタ、メモリ、セグメントレジスタ、即値|

ディスティネーションオペランドとソースオペランドのサイズが異なる場合、エラーが発生する  
アドレスをレジスタに移動する際には、キーワード「OFFSET」を使用する

### 書式（アドレスを移動1）

```mov ディスティネーションオペランド,OFFSET ソースオペランド```

### 書式（アドレスを移動2）

```lea ディスティネーションオペランド,ソースオペランド```

## ストリング命令

メモリ上の連続したバイト、ワード又はダブルワード（ストリング）を一括で移動  
オペランドは、バイトでもワードでもダブルワードでも構わないが、ディスティネーションオペランドとソースオペランドのサイズは統一されている必要あり  
ESIレジスタに入っているアドレスのデータを、EDIレジスタに入っているアドレスのメモリに、ECXで指定した回数だけ移動

### 命令のイメージ

ESI（移動元データ） × ECX（回数） → EDI（移動先）

### 書式

```rep movs```

rep命令は単独で使われることはなく、必ずストリング命令と組み合わせて使用され、ストリング操作を繰り返す  
なお、ストリング命令を使用する際は、ESIとEDIレジスタの値が繰り返しごとにインクリメントされるようにするため、cld命令でDFをクリアする  
DFがセットされていると、ESIとEDIレジスタの値が繰り返しごとにデクリメントされる  
移動するデータのサイズを限定した命令のバリエーションとして、movsb、movsw、movsdがある  
それぞれ、バイト、ワード、ダブルワードのデータを移動

## 交換命令

ソースオペランドとディスティネーションオペランドの内容を交換  
ディスティネーションオペランドとソースオペランドのサイズは統一されている必要あり  
即値使用不可  
双方メモリは不可

### 書式

```xchg ディスティネーションオペランド,ソースオペランド```

### オペランドに指定できる値

|オペランド|指定できる値|
----|----
|ディスティネーションオペランド|レジスタ|
|ソースオペランド|レジスタ、メモリ|

<!-- ## プッシュとポップ -->

<!-- ## ロードとストア -->