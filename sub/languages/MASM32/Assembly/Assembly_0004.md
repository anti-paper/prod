[Top](../../../../index.md)\>
[プログラミング言語](../../../pgl.md)\>
[アセンブリ（MASM32）](../../language_0001.md)\>
[アセンブリ言語の実践的活用](../MASM32_0014.md)

# 最適化

## アセンブリ言語レベルの最適化

アセンブリ言語プログラムそのものの最適化

### 命令の選択

命令によって実行速度が異なるため、より高速に実行できる命令を選択すると、実行時間を短縮できる  
例：2の累乗の計算には、mulやdivではなく、シフト命令を使用する

### ストレージの選択

レジスタへのアクセスは、メモリへのアクセスよりはるかに高速であるため、極力レジスタを使用する（特に、ループのカウンタのような頻繁に使用する値）

### キャッシュの利用

CPUの内部又は外部でCPUの近くにある、特に速度の速いメモリであるキャッシュに入っている命令やデータをCPUが使用する割合（キャッシュヒット率）を向上させるため、繰り返し使用する命令やデータをメモリ上のなるべく近い位置に配置

### メモリアライメント

メモリ上にデータを保存する際は、アクセスが速くなるような配置を心掛ける

### マクロの利用

プロシージャ呼び出しでは余分な作業（オーバーヘッド）が必要  
マクロの使用によりオーバーヘッドを避けられる場合アリ

## アプリケーションレベルの最適化

アプリケーション全体の中で速度或いはサイズに重大な影響を与えている箇所を見極め、その箇所を必要に応じてアセンブリ言語で記述

### ループの最適化

繰り返し回数の多いループは実行に時間がかかる  
繰り返し回数が多いループ処理のみアセンブリ言語プログラムで記述、というのも有効な方法

### アルゴリズム

一般的には単純なアルゴリズムの方が速度も速くメモリ消費も抑えられるが、効率的なアルゴリズムが公開されている場合も多いため、より良いアルゴリズムがないか調べるのも有効
例：クイックソート

### コンパイラの最適化

場合によっては、人間がアセンブリ言語で記述したプログラムより、コンパイラの最適化オプションを活用した方が効率的なコードが生成されることもある
